									12/05/15
GSC2 Program Reference
======================

 Summary
 -------
  - GSC2_CATALOG_INPUTS
	Generates commands necessary for obtaining a prtion of the GSCII
	guide star catalog and converting it to a format readable by the
	translator strcat_gsc2_input. 

  - STRCAT_GSC2_INPUT
        Input translator for GSC2 star catalog.

  - STR_ABERR
	Corrects star positions for stellar aberration due to the velocity
	of the observer.

	Star catalogues are compiled for a reference frame in which the 
	Sun (or alternately the Solar System Barycenter or SSB) is 
	stationary.  For an observer moving at a large velocity wrt the
	SSB, a correction must be done.  Let v be the observer's velocity.
	If omega is the angle between the observer's velocity vector and 
	the vector pointing towards the star, then v*sin(omega) is the 
	component of the observer's velocity that is tangential to the 
	star's position.  To transform the starlight's velocity vector
	from the SSB-stationary frame into the observer's frame, this
	velocity must be vector-subtracted from the starlight's vector.
	The result is the starlight's path as observed in the observer's
	frame, which is deflected by an angle phi (the angle at the
	bottom of the triangle below).  Since, according to Special
	Relativity, the velocity of light is c = 3e8 m/s in all frames,
	the hypoteneuse of the triangle below (representing the light's
	path in the observer's frame) has a vector magnitude of c.

		     v*sin(omega)

			<-----
			^     ^
			 \    |
	   apparent path \   | actual path
	   of starlight	   \  | of starlight
		(c)	    \ |
			     \|

	Therefore, we arrive at an expression for the deflection angle:

		sin(phi) = v*sin(omega) / c


















GSC2_CATALOG_INPUTS
-------------------


 PURPOSE:
	Generates commands necessary for obtaining a prtion of the GSCII
	guide star catalog and converting it to a format readable by the
	translator strcat_gsc2_input. 


 CATEGORY:
	NV/CONFIG


 CALLING SEQUENCE:
	gsc2_catalog_inputs, dd, cd=cd


 ARGUMENTS:
  INPUT:
	dd:		Data descriptor.

  OUTPUT:
	NONE


 KEYWORDS:
  INPUT:
	cd:	Camera descriptor, required.

	n:	Maximum number of stars searched in catalog.  Default is 5000.

	m1:	Brightest visual magnitude to match.  Default is 0.

	m2:	Faintest visual magnitude to match.  Default is 19.5.

  OUTPUT:
	NONE


 PROCEDURE:
	This procedure uses the given information to generate and print a URL
	that the user can enter into a web browser to automatically search the
	guide star catalog.  The user is instructed to save the results in
	a file in the directory given by the environment variable NV_GSC2_DATA.
	A command is then printed that will convert all such data files in that
	directory into a single binary file in the same directory, readable by
	the gsc2 translator.


 STATUS:
	Complete


 SEE ALSO:
	strcat_gsc2_input


 MODIFICATION HISTORY:
 	Written by:	Spitale, 2/2002
	





STRCAT_GSC2_INPUT
-----------------


 PURPOSE:
        Input translator for GSC2 star catalog.


 CATEGORY:
	NV/CONFIG


 CALLING SEQUENCE:
       result = strcat_gsc2_input(dd, keyword)


 ARGUMENTS:
  INPUT:
	dd:		Data descriptor.

	keyword:	String giving the name of the translator quantity.

  OUTPUT:
       NONE

 KEYWORDS:
  INPUT:
	key1:		Observer descriptor, must be of subclass CAMERA.

  OUTPUT:
	status:		Zero if valid data is returned.

	n_obj:		Number of objects returned.

	dim:		Dimensions of return objects.


  TRANSLATOR KEYWORDS:
 	jtime:		Years since 1950 (the epoch of catalog) for precession
			and proper motion correction.  If not given, it is taken
			from the object descriptor bod_time, which is assumed to
			be seconds past 1950 unless keyword /j2000 is set.

	j2000:		If set, coordinates are output wrt j2000.

	b1950:		If set, coordinates are output wrt b1950.

	path_gsc2:	The directory of the star catalog.   If not given, the
			routine uses the environment variable 'NV_GSC2_DATA'.  
			The catalog data is grouped into approx 10,000 separate
			regions in numbered files in 24 separate subdirectories.
			Each star has a data record of 16 bytes.
			GSC_ID, CLASS, RA_DEG (degrees), DEC_DEG (degrees), and
			MAG (Visual Magnitude). The real values (RA_DEG, DEC_DEG
			and MAG) are in XDR, the GSC_ID and CLASS are 
			network-order short integers.

	faint:		Stars with magnitudes fainter than this will not be
			returned.

	bright:		Stars with magnitudes brighter than this will not be
			returned.


  ENVIRONMENT VARIABLES:
	NV_GSC2_DATA:	Directory containing the GSC2 catalog data unless
			overridden using the path_gsc2 translator keyword.


 RETURN:
       Star descriptor containing all the stars found.  The Sp part of
       the star descriptor contains neither the Spectral type nor the 
       GSC class. 


 RESTRICTIONS:
	IMPORTANT: This translator may not be used until the appropriate data
	have been obtained from the Space Telescope Science Institute website. 
	See PROCEDURE below.

       Since the distance to stars are not given in the GSC catalog, the
       position vector magnitude is set as 10 parsec and the luminosity
       is calculated from the visual magnitude and the 10 parsec distance.


 PROCEDURE:
	The gsc2 catalog can be accessed via the Space Telescope Science
	Institute website, but cannot be downloaded in its entirety.  Therefore,
	before using this translator, the catalog must be searched on the stsci
	site:

		http://www-gsss.stsci.edu/support/data_access.htm

	and the results stored in a form readable by this translator.
	Until the complete catalog is available locally, the procedure
	gsc2_catalog_inputs (see the documentation for that procedure) 
	may be used tpo guide the user through the process.
	
       Stars are found in a square area in RA and DEC around a given
       or calculated center.  The star descriptor is filled with stars
       that fit in this area.  If B1950 is selected, input RA, DEC and/or
	ods orient matrix is assumed to be B1950 also, if not, input is
	assumed to be J2000, like the catalog.  The velocity of the observer 
	is used to correct for stellar aberration.


 SEE ALSO:
	gsc2_catalog_inputs


 MODIFICATION HISTORY:
       Written by:     Vance Haemmerle, 3/2000 (pg_get_stars_gsc.pro)
       Modified:       Tiscareno, 8/2000 (pg_get_stars_tycho.pro)
	Modified:	Haemmerle, 12/2000 (pg_get_stars_tycho.pro)
	Modified:	Tiscareno, 9/2001
	Modified:	Spitale; 9/2001 -- changed to strcat_gsc2_input.pro
















STR_ABERR
---------


 PURPOSE:
	Corrects star positions for stellar aberration due to the velocity
	of the observer.

	Star catalogues are compiled for a reference frame in which the 
	Sun (or alternately the Solar System Barycenter or SSB) is 
	stationary.  For an observer moving at a large velocity wrt the
	SSB, a correction must be done.  Let v be the observer's velocity.
	If omega is the angle between the observer's velocity vector and 
	the vector pointing towards the star, then v*sin(omega) is the 
	component of the observer's velocity that is tangential to the 
	star's position.  To transform the starlight's velocity vector
	from the SSB-stationary frame into the observer's frame, this
	velocity must be vector-subtracted from the starlight's vector.
	The result is the starlight's path as observed in the observer's
	frame, which is deflected by an angle phi (the angle at the
	bottom of the triangle below).  Since, according to Special
	Relativity, the velocity of light is c = 3e8 m/s in all frames,
	the hypoteneuse of the triangle below (representing the light's
	path in the observer's frame) has a vector magnitude of c.

		     v*sin(omega)

			<-----
			^     ^
			 \    |
	   apparent path  \   | actual path
	   of starlight	   \  | of starlight
		(c)	    \ |
			     \|

	Therefore, we arrive at an expression for the deflection angle:

		sin(phi) = v*sin(omega) / c


 CATEGORY:
       LIB/STR


 CALLING SEQUENCE:
       str_aberr, rain, decin, vel, raout, decout


 ARGUMENTS:
  INPUT:
           rain:    Actual right ascension of the star(s), in degrees

          decin:    Actual declination of the star(s), in degrees

            vel:    Velocity of the observer, in meters/second

  OUTPUT:
          raout:    Apparent right ascension of the star(s), in degrees

         decout:    Apparent declination of the star(s), in degrees


 KEYWORDS:
  INPUT:
       NONE

  OUTPUT:
       NONE


 RESTRICTIONS:
	Inputs rain and decin must have the same number of elements.
	Input vel must be a 1x3 vector in inertial Cartesian coordinates,
	  in units of meters/second.

 STATUS:
       Completed.


 MODIFICATION HISTORY:
       Written by:     Tiscareno, 7/00
	obsolete due to change in glb_globe routines 7/2007; Spitale


















































